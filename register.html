<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Register</title>
    <style>
        .red {
            color: rgb(172, 30, 124);

        }

        .yellow {
            color: rgb(179, 176, 11);

        }
    </style>
</head>

<body>
    
    <div style="width: 30%; margin: auto; margin-top: 10%; padding: 3%; background-color: aqua; border: 2px,rgb(71, 71, 253),solid; border-radius: 15px;">
        <h3>Register Page</h3>
        <form  >
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Email address</label>
              <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" required="required" autofocus="autofocus">
              <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
            </div>
            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label" >New Password</label>
              <input type="password" class="form-control" id="exampleInputPassword1" required>
              <label for="exampleInputPassword2" class="form-label" >Confirm Password</label>
              <input type="password" class="form-control" id="exampleInputPassword2" required="required">
            </div>
            
            <button type="button" class="btn btn-primary" onclick="myFunction()">Submit</button>
            <button type="reset" class="btn btn-secondary " onclick="removeall()">Reset</button>
            <a href="loginpage.html"><button type="button" class="btn btn-success ">Go To Login</button></a>
          </form>
          
    </div>
    
    <!-- <input username id="name_2" type="text" placeholder="name" name="name_2" required="required" autofocus="autofocus"> -->
<script>
   function myFunction() {
   var email = document.getElementById("exampleInputEmail1").value;
   var password = document.getElementById("exampleInputPassword1").value;
   var confirmpassword = document.getElementById("exampleInputPassword2").value;
//    document.getElementById("greeting").innerHTML = "Hello, " + name + "! Welcome!";



 var state=localStorage.getItem("AuthenticationState");
 localStorage.removeItem("AuthenticationState");
 var size=localStorage.length;
 let value;

 
    if(email!=""&&password!==""&&confirmpassword!=""){
    for(let i=1;i<=size-1;i++){
        var newemail=localStorage.getItem(i);
     
    console.log(newemail);
    const obj = JSON.parse(newemail);
    let getemail=obj.email;
    let getpassword=obj.password;
   
     
    if(email==getemail){
        value=1;
        
        alert("Email Already Exsist...")

        break;
    
    }
 }
 let mydata;
        if (value != 1) {
               localStorage.getItem(email);
               if (password == confirmpassword) {
                   localStorage.setItem(size + 1, `{"email":"${email}", "password":"${password}"}`  );
                //    localStorage.setItem(email, );
                
                   alert("Successfully Register...")
                   
               } else {
                   alert("Password Not Match...")
                   
               }
           }
       }
       else {
        
           alert("Please fill the fields")
            
       }
       localStorage.setItem("AuthenticationState", state);
        }
        /// authentication not null
        



   



// localStorage.setItem(i,[email]);
// localStorage.setItem(email,password);
    
// var size=localStorage.length;
//  let value;
// if(email!=""&&password!==""&&confirmpassword!=""){
// for(let i=0;i<size;i++){
//     var newemail=localStorage.getItem(i);
//     if(email==newemail){
//         value=1;
        
//         alert("Email Already Exsist...")
//         break;
    
//     }
//  }
//         if (value != 1) {
//                localStorage.getItem(email);
//                if (password == confirmpassword) {
//                    localStorage.setItem(size + 1, [email,password]);
//                 //    localStorage.setItem(email, );
//                    alert("Successfully Register...")
//                } else {
//                    alert("Password Not Match...")
//                }
//            }
//        }
//        else {
//            alert("Please fill the fields")
//        }

//    }
// 
// 
function removeall(){
    localStorage.clear();
}

</script>

</body>